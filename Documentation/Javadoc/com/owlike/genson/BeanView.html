<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_181) on Mon Mar 04 17:20:21 PST 2019 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>BeanView (Genson 1.5 API)</title>
<meta name="date" content="2019-03-04">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="BeanView (Genson 1.5 API)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BeanView.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../com/owlike/genson/Context.html" title="class in com.owlike.genson"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/owlike/genson/BeanView.html" target="_top">Frames</a></li>
<li><a href="BeanView.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li>Method</li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li>Method</li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.owlike.genson</div>
<h2 title="Interface BeanView" class="title">Interface BeanView&lt;T&gt;</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - the type of objects on which this view will be applied.</dd>
</dl>
<hr>
<br>
<pre>public interface <span class="typeNameLabel">BeanView&lt;T&gt;</span></pre>
<div class="block">Interface to be implemented by classes who want to act as a view on objects of type T during
 serialization and deserializaiton.
 <p/>
 To understand what a BeanView is we must first understand one of the problems it is intended to
 solve. Imagine you store some business objects in a cache and you have internal and external
 webservices that all return a different json representation of those objects (filtered properties
 and even transformed properties). The external webservices can't return the same representation
 as the internal ones as the object may contain some confidential data.
 <ul>
 Usually you have two choices :
 <li>Use a different instance of the json library for each different json representation and
 configure it with custom Serializers/Deserializers (you can use annotations to filter properties
 but not to change its name if you have multiple names and nor to transform the data).</li>
 <li>Use data transfer objects that will act as a "View of your Model". You will have to copy the
 data from the cached objects to the DTOs and serialize them. As a result your cache has lost some
 of its interest (you will create new instances of DTOs).</li>
 </ul>
 <p/>
 The BeanView tries to solve this kind of problem by taking the second approach. Indeed
 implementations of BeanView will act as a stateless bean that will extract data (and could apply
 transformations) during serialization and as a factory and data aggregator during
 deserialization. The parameterized type T will correspond to the type of the objects on which
 this view can be applied. All the methods from the view respecting the conventional JavaBean
 structure will be used (getters to extract data, setters to aggregate and static methods
 annotated with <a href="../../../com/owlike/genson/annotation/JsonCreator.html" title="annotation in com.owlike.genson.annotation"><code>JsonCreator</code></a> as factory methods). Except that the
 getters will take an argument of type T (from which to extract the data), and the setter two
 arguments, the value (can be a complex object, in that case Genson will try to deserialize the
 current value into that type) and T object in which to set the data. Parameters order matters,
 for setters the first parameter is the value to deserialize and the second is the object that you
 are building (of type T). By default the beanview functionality is disabled, to enable it use
 method <a href="../../../com/owlike/genson/GensonBuilder.html#useBeanViews-boolean-"><code>GensonBuilder.useBeanViews(boolean)</code></a>
 setWithBeanViewConverter(true)} from Genson.Builder. Lets have a look at this example to better
 understand how it works.
 <p/>
 <pre>
 public static class Person {
        private String lastName;
        String name;
        int birthYear;
        String thisFieldWontBeSerialized;

        Person(String lastName) {
                this.lastName = lastName;
  }

 public String getLastName() {
        return lastName;
 }

 // instead of serializing and deserializing Person based on the fields and methods it contains those
 // and only those from the BeanView will be used
 public static class ViewOfPerson implements BeanView&lt;Person&gt; {
        public ViewOfPerson() {
  }

        // This method will be called to create an instance of Person instead of using the constructor
        // or annotated @Creator method from Person
        &#064;JsonCreator
        public static Person createNewPerson(String lastName) {
                return new Person(lastName);
  }

        public String getLastName(Person p) {
                return p.getLastName();
  }

        public @JsonProperty(&quot;name&quot;)
        String getNameOf(Person p) {
                return p.name;
  }

        // here we will transform the birth year of the person into its age and change the serialized
        // name from &quot;birthYear&quot; to &quot;age&quot;
        public int getAge(Person p) {
                return GregorianCalendar.getInstance().get(Calendar.YEAR) - p.birthYear;
  }

        public void setName(String name, Person p) {
                p.name = name;
  }

        // here it will match the property named &quot;age&quot; from the json stream and transform it into birth
        // year of Person
        &#064;JsonProperty(&quot;age&quot;)
        public void setBirthYear(int personBirthYear, Person p) {
                p.birthYear = GregorianCalendar.getInstance().get(Calendar.YEAR) - personBirthYear;
  }
 }

 public static void main(String[] args) {
        Genson genson = new Genson.Builder().setWithBeanViewConverter(true).create();
        genson.serialize(new Person("eugen"), ViewOfPerson.class);
 }
 </pre>
 <p/>
 <p/>
 Implementations of BeanView must be stateless, thread safe and have a default no arg constructor.
 BeanViews will be applied at <u>runtime before the standard Converter</u>. If a view for the
 current type is present in the context it will be used instead of the corresponding Converter. If
 you want to understand how it works behind the scene you can have a look at <a href=
 "http://code.google.com/p/genson/source/browse/src/main/java/com/owlike/genson/convert/BeanViewConverter.java"
 >BeanViewConverter</a> and <a href=
 "http://code.google.com/p/genson/source/browse/src/main/java/com/owlike/genson/reflect/BeanViewDescriptorProvider.java"
 >BeanViewDescriptorProvider</a>.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../com/owlike/genson/convert/BeanViewConverter.html" title="class in com.owlike.genson.convert"><code>BeanViewConverter</code></a>, 
<a href="../../../com/owlike/genson/reflect/BeanViewDescriptorProvider.html" title="class in com.owlike.genson.reflect"><code>BeanViewDescriptorProvider</code></a>, 
<a href="../../../com/owlike/genson/annotation/JsonCreator.html" title="annotation in com.owlike.genson.annotation"><code>JsonCreator</code></a>, 
<a href="../../../com/owlike/genson/annotation/JsonProperty.html" title="annotation in com.owlike.genson.annotation"><code>JsonProperty</code></a></dd>
</dl>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BeanView.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../com/owlike/genson/Context.html" title="class in com.owlike.genson"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/owlike/genson/BeanView.html" target="_top">Frames</a></li>
<li><a href="BeanView.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li>Method</li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li>Method</li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2019. All rights reserved.</small></p>
</body>
</html>
